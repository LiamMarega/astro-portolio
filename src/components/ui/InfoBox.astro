---
import AvatarWithBorder from "./avatarWithBorder.astro";
import StickerPeel from "./StickerPeel.astro";
// InfoBox.astro - Animated info box displaying skills and technologies
---

<section
  id="info-box"
  class="relative max-w-[95%] sm:max-w-[90%] md:max-w-[85%] lg:max-w-[80%] xl:max-w-[75%] mx-auto w-full mt-24 mb-32"
  role="region"
  aria-label="Developer skills and technologies"
>
  <div
    class="relative flex items-center justify-center px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8 bg-white rounded-[2rem] sm:rounded-r-full animate-slide-in h-40 sm:h-24 md:h-32 lg:h-48 xl:h-60"
  >
    <div
      class="absolute left-1/2 -translate-x-1/2 bottom-4 sm:-bottom-16 w-32 h-32 sm:w-24 sm:h-24 md:w-32 md:h-32 lg:h-48 lg:w-48 xl:h-[32rem] xl:w-96 hover:scale-105 transition-transform duration-300 animate-slide-in-with-container"
    >
      <img
        class="w-full h-full object-contain [filter:drop-shadow(0_2px_0_white)_drop-shadow(0_-2px_0_white)_drop-shadow(2px_0_0_white)_drop-shadow(-2px_0_0_white)_drop-shadow(2px_2px_0_white)_drop-shadow(-2px_-2px_0_white)_drop-shadow(2px_-2px_0_white)_drop-shadow(-2px_2px_0_white)]"
        alt="Liam Marega - Professional Developer Avatar"
        src="/images/avatar-withoutbg.png"
      />
    </div>

    <!-- Mobile developer bubble (TOP-LEFT) -->
    <div
      class="bubble-card absolute -top-10 left-2 sm:left-4 md:left-10 lg:left-20
      bg-green-200 delay-1 flex-center z-10"
      role="img"
      aria-label="Mobile Developer specialization"
    >
      <h3
        class="text-black text-[10px] sm:text-xs md:text-sm lg:text-base font-bold leading-tight"
      >
        MOBILE DEVELOPER
      </h3>
      <span
        class="hidden sm:block text-black text-[8px] sm:text-[10px] md:text-xs leading-tight"
      >
        Professional iOS and Android developer
      </span>
    </div>

    <!-- Web developer bubble (BOTTOM-RIGHT) -->
    <div
      class="bubble-card absolute -bottom-10 right-2 sm:right-16 md:right-24 lg:right-48 xl:right-60
      bg-lime-200 delay-2 flex-center z-10"
      role="img"
      aria-label="Web Developer specialization"
    >
      <h3
        class="text-black text-[10px] sm:text-xs md:text-sm lg:text-base font-bold leading-tight"
      >
        WEB DEVELOPER
      </h3>
      <span
        class="hidden sm:block text-black text-[8px] sm:text-[10px] md:text-xs leading-tight"
      >
        Developing websites with best practices
      </span>
    </div>

    <!-- Technologies card 1 (TOP-RIGHT) -->
    <div
      class="tech-card absolute -top-10 right-2 sm:right-4 md:right-auto md:left-24 lg:left-32 xl:left-40
      rotate-3 sm:rotate-6 md:rotate-12 bg-yellow-300 delay-3 z-10"
      role="img"
      aria-label="Primary technologies: React, Flutter, Next.js"
    >
      <div
        class="corner-dot left-1 sm:left-2 top-1 sm:top-2"
        aria-hidden="true"
      >
      </div>
      <div
        class="corner-dot right-1 sm:right-2 top-1 sm:top-2"
        aria-hidden="true"
      >
      </div>
      <div
        class="corner-dot left-1 sm:left-2 bottom-1 sm:bottom-2"
        aria-hidden="true"
      >
      </div>
      <div
        class="corner-dot right-1 sm:right-2 bottom-1 sm:bottom-2"
        aria-hidden="true"
      >
      </div>
      <h3
        class="text-black font-bold text-[10px] sm:text-xs md:text-sm lg:text-base leading-tight"
      >
        REACT
      </h3>
      <h3
        class="text-black font-bold text-[10px] sm:text-xs md:text-sm lg:text-base leading-tight"
      >
        FLUTTER
      </h3>
      <h3
        class="text-black font-bold text-[10px] sm:text-xs md:text-sm lg:text-base leading-tight"
      >
        NEXT.JS
      </h3>
    </div>

    <!-- Technologies card 2 (BOTTOM-LEFT) -->
    <div
      class="tech-card absolute -bottom-10 left-2 sm:left-72 md:-right-8 lg:-right-14
      -rotate-3 sm:-rotate-6 md:-rotate-12 bg-green-200 delay-4 z-10"
      role="img"
      aria-label="UX/UI Design expertise since 2025"
    >
      <div
        class="corner-dot left-1 sm:left-2 top-1 sm:top-2"
        aria-hidden="true"
      >
      </div>
      <div
        class="corner-dot left-1 sm:left-2 bottom-1 sm:bottom-2"
        aria-hidden="true"
      >
      </div>
      <h3
        class="text-black font-bold text-[10px] sm:text-xs md:text-sm lg:text-base leading-tight"
      >
        UX/UI
      </h3>
      <h3
        class="text-black font-bold text-[10px] sm:text-xs md:text-sm lg:text-base leading-tight"
      >
        @'26
      </h3>
    </div>
  </div>
</section>

<style>
  /* Reusable bubble styles */
  .bubble-card {
    @apply w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 lg:w-28 lg:h-28 xl:w-32 xl:h-32 2xl:w-36 2xl:h-36 
      p-1 sm:p-2 md:p-3 lg:p-4
      rounded-full flex flex-col items-center justify-center text-center
      animate-pop-in shadow-lg;
  }

  /* Reusable tech card styles */
  .tech-card {
    @apply w-16 h-20 sm:w-20 sm:h-24 md:w-32 md:h-28 lg:w-40 lg:h-32
      px-1 sm:px-2 md:px-4 lg:px-6 py-2 sm:py-3 md:py-4
      rounded-2xl flex flex-col items-center justify-center
      animate-pop-in shadow-lg;
  }

  /* Corner dots for cards */
  .corner-dot {
    @apply absolute w-1 h-1 sm:w-2 sm:h-2 rounded-full bg-gray-600;
  }

  /* Reusable flex center utility */
  .flex-center {
    @apply flex flex-col items-center justify-center text-center;
  }

  /* Animation keyframes */
  @keyframes slideIn {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }
    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes popIn {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Animation classes */
  .animate-slide-in {
    animation: slideIn 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  }

  .animate-slide-in-with-container {
    animation: none; /* Inherit parent container animation */
  }

  .animate-pop-in {
    opacity: 0;
    animation: popIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  .delay-1 {
    animation-delay: 1.5s;
  }

  .delay-2 {
    animation-delay: 1.7s;
  }

  .delay-3 {
    animation-delay: 1.9s;
  }

  .delay-4 {
    animation-delay: 2.1s;
  }

  /* Accessibility and performance improvements */
  @media (prefers-reduced-motion: reduce) {
    .animate-slide-in,
    .animate-pop-in {
      animation: none;
      opacity: 1;
      transform: none;
    }

    .delay-1,
    .delay-2,
    .delay-3,
    .delay-4 {
      animation-delay: 0s;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .bubble-card,
    .tech-card {
      border: 2px solid currentColor;
    }

    .corner-dot {
      background-color: currentColor;
    }
  }

  /* Focus management */
  img:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }

  /* Ensure proper stacking context */
  #info-box {
    z-index: 5;
  }

  /* Performance optimization */
  .animate-slide-in,
  .animate-pop-in {
    will-change: transform, opacity;
  }

  .animate-slide-in.animation-complete,
  .animate-pop-in.animation-complete {
    will-change: auto;
  }
</style>
