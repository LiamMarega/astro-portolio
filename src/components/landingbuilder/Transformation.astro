---

---

<section
  class="py-24 bg-surface-dark border-y border-border-dark overflow-hidden relative"
>
  <div class="torn-paper-top"></div>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-20">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
      <!-- Left Column -->
      <div class="space-y-8 relative">
        <div
          class="inline-block bg-primary/10 border border-primary/20 px-3 py-1 rounded-sm"
        >
          <span class="text-primary text-xs font-bold uppercase tracking-wider"
            >Transformación Real</span
          >
        </div>
        <h2
          class="text-3xl lg:text-4xl font-bold text-white font-display leading-tight"
        >
          De una web pasiva a un <br />
          <span class="text-primary relative inline-block text-hand-highlight"
            >Activo Digital</span
          > de alto rendimiento.
        </h2>
        <p class="text-text-dim text-lg">
          La diferencia entre "tener una web" y tener una máquina de ventas.
          Eliminamos la fricción técnica para que tu mensaje brille.
        </p>
        <div
          class="space-y-4 pt-4 relative bg-black/20 p-6 rounded-sm border border-border-dark/50"
        >
          <div class="flex items-start">
            <svg
              class="w-6 h-6 text-red-500 mr-3 mt-1 flex-shrink-0"
              viewBox="0 0 24 24"
              fill="currentColor"
              aria-hidden="true"
              ><path
                d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"
              ></path></svg
            >
            <div>
              <strong class="text-white block"
                >Antes (Lenta / Sin Claridad)</strong
              >
              <p class="text-text-dim text-sm">
                Cargas de +5s, diseño saturado, textos aburridos y baja
                conversión.
              </p>
            </div>
          </div>
          <div class="flex items-center justify-center py-2">
            <svg
              class="w-6 h-6 text-border-dark"
              viewBox="0 0 24 24"
              fill="currentColor"
              aria-hidden="true"
              ><path
                d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"
              ></path></svg
            >
          </div>
          <div class="flex items-start">
            <svg
              class="w-6 h-6 text-primary mr-3 mt-1 flex-shrink-0"
              viewBox="0 0 24 24"
              fill="currentColor"
              aria-hidden="true"
              ><path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
              ></path></svg
            >
            <div>
              <strong class="text-white block"
                >Después (Activo Digital Pro)</strong
              >
              <p class="text-text-dim text-sm">
                Carga en &lt;1s, autoridad visual instantánea y flujo de ventas
                claro.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column (Before/After Slider) -->
      <div
        class="relative w-full aspect-[4/3] bg-background-dark border border-border-dark shadow-2xl group rounded-sm overflow-hidden select-none"
        id="comparison-container"
        role="group"
        aria-label="Comparación antes y después del rediseño web"
      >
        <!-- After Image (Base Layer) -->
        <div class="absolute inset-0 w-full h-full">
          <div
            class="absolute top-4 right-4 bg-primary text-black text-[10px] font-bold uppercase px-2 py-1 z-10 rounded-sm shadow-lg pointer-events-none"
          >
            Después
          </div>
          <img
            alt="Sleek dark mode modern dashboard interface"
            class="w-full h-full object-cover"
            src="https://lh3.googleusercontent.com/aida-public/AB6AXuBMag2DqeCy4Oooe5vMCwDLKLut2Lz67yqzcvgENkC7fVjdZZ-IG_6Q-wRVoxn_RM8_4TmVRp9VXXUmnPMclSn2apVGSfNk2DssRitgR0xK52tTIXzWl-Ok5Su6qffi9-NpdVoGieBwDQFGuu1MEYj8841OY0ny8Cs7acZ2ghxdbFOa6r4P1nBwDGiAV6LrhdHDKkIGyKJMqlfDkGsaSkf64LBWNsPeND-FF6mnrIlYRR9X3xokDSgTdl8PDptZp1psz-giTqUPwbU"
            width="512"
            height="383"
            loading="lazy"
            decoding="async"
            draggable="false"
          />
        </div>

        <!-- Before Image (Overlay Layer) -->
        <div
          class="absolute inset-0 h-full overflow-hidden border-r border-primary bg-gray-900"
          style="width: 50%;"
          id="before-image-wrapper"
        >
          <div
            class="absolute top-4 left-4 bg-red-600 text-white text-[10px] font-bold uppercase px-2 py-1 z-10 rounded-sm pointer-events-none"
          >
            Antes
          </div>
          <img
            alt="Screens of cluttered outdated web design layout"
            class="absolute top-0 left-0 w-full h-full max-w-none object-cover opacity-40 grayscale filter blur-[2px]"
            style="width: 100%; height: 100%;"
            src="https://lh3.googleusercontent.com/aida-public/AB6AXuDzQ7vIuI4QVoqY7JyWcsnekjm6nzVB8JuJ4ilW812uVc6RbC_tsYgDnzXPM7hLB32Hb1JDsywyRWL70q0jD2RuFMQ5CALpVo6q39tMLRiTZEy7oXXrfGIcqLADSijPDVtIlvU_P7U0sfWwBXX3m7szUTsWCdPjcwv-QP8rEg3Fi5SToAcrmu1v_d_ZCN6nc9WVd0KzftTyFVuJmGlTtJTPGrZBc41XwVvyZXZrx4E1Vo6WrH8n__4SY5uxGRuROf27Wos3sIoeS-w"
            width="512"
            height="381"
            loading="lazy"
            decoding="async"
            draggable="false"
            id="before-image"
          />
        </div>

        <!-- Slider Handle -->
        <div
          class="absolute top-0 bottom-0 w-px bg-transparent z-20 cursor-ew-resize touch-none"
          style="left: 50%; transform: translateX(-50%);"
          id="slider-handle"
          role="slider"
          aria-label="Deslizador de comparación antes y después"
          aria-valuemin="0"
          aria-valuemax="100"
          aria-valuenow="50"
          tabindex="0"
        >
          <!-- Visual Line -->
          <div
            class="absolute inset-y-0 left-1/2 w-0.5 -ml-[1px] bg-primary shadow-[0_0_10px_rgba(226,255,0,0.5)]"
          >
          </div>

          <!-- Circle Handle -->
          <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-black border border-primary rounded-full flex items-center justify-center shadow-lg transform active:scale-110 transition-transform"
          >
            <svg
              class="w-4 h-4 text-primary"
              viewBox="0 0 24 24"
              fill="currentColor"
              aria-hidden="true"
              ><path
                d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"
              ></path></svg
            >
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="torn-paper-bottom"></div>
</section>

<script>
  function initComparisonSlider() {
    const container = document.getElementById("comparison-container");
    const beforeWrapper = document.getElementById("before-image-wrapper");
    const beforeImage = document.getElementById("before-image");
    const handle = document.getElementById("slider-handle");

    if (!container || !beforeWrapper || !handle || !beforeImage) return;

    let isDragging = false;
    let containerWidth = container.offsetWidth;

    const updateSlider = (percent: number) => {
      percent = Math.max(0, Math.min(100, percent));
      beforeWrapper.style.width = `${percent}%`;
      handle.style.left = `${percent}%`;
      handle.setAttribute("aria-valuenow", String(Math.round(percent)));
      beforeImage.style.width = `${containerWidth}px`;
    };

    const handleStart = (e: Event) => {
      isDragging = true;
      containerWidth = container.offsetWidth;
      document.body.style.cursor = "ew-resize";
      e.preventDefault();
    };

    const handleEnd = () => {
      isDragging = false;
      document.body.style.cursor = "";
    };

    const handleMove = (e: MouseEvent | TouchEvent) => {
      if (!isDragging) return;

      const clientX = "touches" in e ? e.touches[0].clientX : e.clientX;
      const rect = container.getBoundingClientRect();
      const x = clientX - rect.left;
      const percent = (x / rect.width) * 100;
      updateSlider(percent);
    };

    // Keyboard support for accessibility
    const handleKeydown = (e: KeyboardEvent) => {
      const currentValue = parseFloat(
        handle.getAttribute("aria-valuenow") || "50",
      );
      let newValue = currentValue;
      if (e.key === "ArrowLeft" || e.key === "ArrowDown") {
        newValue = Math.max(0, currentValue - 2);
        e.preventDefault();
      } else if (e.key === "ArrowRight" || e.key === "ArrowUp") {
        newValue = Math.min(100, currentValue + 2);
        e.preventDefault();
      }
      if (newValue !== currentValue) {
        containerWidth = container.offsetWidth;
        updateSlider(newValue);
      }
    };

    const handleResize = () => {
      containerWidth = container.offsetWidth;
      if (beforeImage) {
        beforeImage.style.width = `${containerWidth}px`;
      }
    };

    window.addEventListener("resize", handleResize, { passive: true });
    handleResize();

    handle.addEventListener("mousedown", handleStart);
    handle.addEventListener("touchstart", handleStart, { passive: false });
    handle.addEventListener("keydown", handleKeydown);

    window.addEventListener("mousemove", handleMove, { passive: true });
    window.addEventListener("touchmove", handleMove, { passive: true });

    window.addEventListener("mouseup", handleEnd, { passive: true });
    window.addEventListener("touchend", handleEnd, { passive: true });
  }

  document.addEventListener("astro:page-load", initComparisonSlider);
  initComparisonSlider();
</script>
